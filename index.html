<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>지역봉사지도원 활동일지</title>

  <meta property="og:title" content="지역봉사지도원 활동일지 작성하기" />
  <meta property="og:description" content="오늘 활동일지를 간편하게 작성해 주세요." />
  <meta property="og:image" content="https://dagajala-star.github.io/activity-landing/info.png" />
  <meta property="og:url" content="https://dagajala-star.github.io/activity-landing/" />
  <meta property="og:type" content="website" />

  <style>
    body { margin:0; font-family: system-ui,-apple-system,Segoe UI,Roboto,"Noto Sans KR",Arial,sans-serif; background:#fff; color:#111; }
    .wrap { min-height:100vh; display:grid; place-items:center; padding:28px; text-align:center; }
    .title { font-size:24px; font-weight:900; line-height:1.3; letter-spacing:-0.2px; }
    .sub { margin-top:10px; font-size:16px; font-weight:700; opacity:0.78; line-height:1.45; }
    .dots { display:inline-block; width:1.6em; text-align:left; }
    .dots::after { content:""; display:inline-block; width:1.6em; animation:dots 1.1s infinite steps(4,end); }
    @keyframes dots { 0%{content:"";}25%{content:".";}50%{content:"..";}75%{content:"...";}100%{content:"";} }
  </style>
</head>

<body>
  <div class="wrap">
    <div>
      <div class="title">활동일지로 이동 중입니다<span class="dots"></span></div>
      <div class="sub">잠시만 기다려 주세요. 곧 자동으로 연결됩니다.</div>
    </div>
  </div>

  <script>
    (function () {
      // ✅ dagajala → kr74 로만 보내기 (파라미터 유지)
      const KR74_A_URL = "https://kr74.github.io/a/";

      // ✅ dagajala 쪽 임시 저장 키(도메인이 달라서 kr74 저장과 별개)
      const DK_KEY = "DG_CENTER_CODE";
      const DN_KEY = "DG_USER_NAME";

      // 1) 쿼리 + 해시 파라미터 합치기
      const qs = new URLSearchParams(window.location.search);
      if (window.location.hash) {
        const hs = new URLSearchParams(window.location.hash.replace(/^#/, ""));
        for (const [k, v] of hs.entries()) {
          if (!qs.has(k)) qs.set(k, v);
        }
      }

      // 2) k/name 임시 저장 + (없으면) 임시 저장값으로 복구
      const incomingK = (qs.get("k") || "").trim();
      const incomingName = (qs.get("name") || "").trim();

      if (incomingK) localStorage.setItem(DK_KEY, incomingK);
      else {
        const savedK = (localStorage.getItem(DK_KEY) || "").trim();
        if (savedK) qs.set("k", savedK);
      }

      if (incomingName) localStorage.setItem(DN_KEY, incomingName);
      else {
        const savedName = (localStorage.getItem(DN_KEY) || "").trim();
        if (savedName) qs.set("name", savedName);
      }

      // 3) kr74로 이동 (kr74에서 최종 저장/복구 + 구글웹앱 이동 처리)
      const paramStr = qs.toString();
      const target = paramStr ? (KR74_A_URL + "?" + paramStr) : KR74_A_URL;

      requestAnimationFrame(() => {
        requestAnimationFrame(() => {
          window.location.replace(target);
        });
      });
    })();
  </script>

  <noscript>
    <div class="wrap">
      <div>
        <div class="title">자바스크립트가 꺼져 있어요.</div>
        <div class="sub">브라우저 설정에서 자바스크립트를 켜주세요.</div>
      </div>
    </div>
  </noscript>
</body>
</html>
