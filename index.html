<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>지역봉사지도원 활동일지</title>

  <!-- ✅ 미리보기(카톡/메신저)용 OG -->
  <meta property="og:title" content="지역봉사지도원 활동일지 작성하기" />
  <meta property="og:description" content="아래 버튼을 눌러 활동일지를 작성해 주세요." />
  <meta property="og:image" content="https://kr74.github.io/a/info.png" />
  <meta property="og:url" content="https://dagajala-star.github.io/activity-landing/" />
  <meta property="og:type" content="website" />

  <style>
    body { margin:0; font-family: system-ui,-apple-system,Segoe UI,Roboto,"Noto Sans KR",Arial,sans-serif; background:#fff; color:#111; }
    .wrap { min-height:100vh; display:grid; place-items:center; padding:24px; text-align:center; }
    .card { width:min(520px, 100%); border:1px solid #eee; border-radius:16px; padding:22px; box-shadow:0 8px 24px rgba(0,0,0,0.06); }
    .title { font-size:22px; font-weight:900; line-height:1.3; letter-spacing:-0.2px; }
    .sub { margin-top:10px; font-size:15px; font-weight:700; opacity:0.8; line-height:1.55; }
    .btn {
      margin-top:16px;
      width:100%;
      display:inline-flex; justify-content:center; align-items:center;
      height:54px;
      border:0; border-radius:14px;
      background:#111; color:#fff;
      font-size:18px; font-weight:900;
      cursor:pointer;
    }
    .hint { margin-top:12px; font-size:13px; opacity:0.65; line-height:1.45; }
    .tiny { margin-top:10px; font-size:12px; opacity:0.55; word-break:break-all; }
  </style>
</head>

<body>
  <div class="wrap">
    <div class="card">
      <div class="title">지역봉사지도원 활동일지</div>
      <div class="sub">
        아래 버튼을 눌러 작성 화면으로 이동해 주세요.<br>
        (카카오톡/아이폰에서는 자동 이동이 막힐 수 있어요.)
      </div>

      <button class="btn" id="goBtn">작성하기</button>

      <div class="hint" id="autoHint"></div>
      <div class="tiny" id="targetText"></div>
    </div>
  </div>

  <script>
    (function () {
      const BASE = "https://kr74.github.io/a/";

      // ?k=..., ?name=... 유지
      const qs = new URLSearchParams(location.search);

      // #k=... 형태도 유지(있으면 합치기)
      if (location.hash) {
        const hs = new URLSearchParams(location.hash.replace(/^#/, ""));
        for (const [k, v] of hs.entries()) if (!qs.has(k)) qs.set(k, v);
      }

      const paramStr = qs.toString();
      const target = paramStr ? (BASE + "?" + paramStr) : BASE;

      // 화면에 목적지 표시(디버그용/안심용)
      document.getElementById("targetText").textContent = target;

      // ✅ 버튼 클릭 시 이동(가장 확실)
      document.getElementById("goBtn").addEventListener("click", () => {
        location.href = target;
      });

      // ✅ 자동이동은 "옵션"으로만:
      //  - ?auto=1 이 붙은 경우에만 0.6초 후 자동 이동
      //  - 미리보기는 dagajala에서 그대로 보여주고 싶으면 기본은 자동이동 OFF가 안전
      const auto = qs.get("auto") === "1";
      if (auto) {
        document.getElementById("autoHint").textContent = "잠시 후 자동으로 이동합니다…";
        setTimeout(() => { location.replace(target); }, 600);
      } else {
        document.getElementById("autoHint").textContent = "";
      }
    })();
  </script>
</body>
</html>
